{"version":3,"file":"src_app_pages_basket_basket_module_ts.js","mappings":"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","sources":["./src/app/pages/basket/basket-routing.module.ts","./src/app/pages/basket/basket.module.ts","./src/app/pages/basket/basket.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { BasketPage } from './basket.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: BasketPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class BasketPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule,DatePipe } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { BasketPageRoutingModule } from './basket-routing.module';\nimport { BasketPage } from './basket.page';\nimport { HttpClient } from \"@angular/common/http\";\nimport { TranslateHttpLoader } from \"@ngx-translate/http-loader\";\nimport { TranslateLoader, TranslateModule } from \"@ngx-translate/core\";\nimport {ShareComponentModule} from '../../components/share-component-module';\nexport function HttpLoaderFactory(http: HttpClient) {\n  return new TranslateHttpLoader(http, \"./assets/i18n/\", \".json\");\n}\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ShareComponentModule,\n    BasketPageRoutingModule,\n    TranslateModule.forChild({\n      loader: {\n        provide: TranslateLoader,\n        useFactory: HttpLoaderFactory,\n        deps: [HttpClient],\n      }\n    })\n  ],\n  declarations: [BasketPage],\n  providers:[DatePipe]\n})\nexport class BasketPageModule {}\n","import { DatePipe } from '@angular/common';\nimport { Component, OnInit } from '@angular/core';\nimport { DomSanitizer } from '@angular/platform-browser';\nimport { Router, NavigationStart } from '@angular/router';\nimport { filter } from 'rxjs/operators';\nimport { NavController } from '@ionic/angular';\nimport { ApiService } from 'src/app/services/api.service';\nimport { UtilService } from 'src/app/services/util.service';\nimport { session } from 'src/app/utility/message';\nimport { UserModalPage } from 'src/app/components/user-modal/user-modal.page';\n@Component({\n  selector: 'app-basket',\n  templateUrl: './basket.page.html',\n  styleUrls: ['./basket.page.scss'],\n})\nexport class BasketPage implements OnInit {\n\n  constructor(\n    private utility: UtilService,\n    private apiService: ApiService,\n    private router: Router,\n    private navController: NavController,\n    private domSanit: DomSanitizer,\n    public datepipe: DatePipe\n  ) { }\n  products_data: any = [];\n  previousUrl: any;\n  currentUrl: any;\n  backBtn: boolean;\n  totalAmt: any;\n  userInfo: any;\n  profile: any;\n  paymentUrl: any;\n  paymentId: any;\n  ionModelOpen = false\n  ngOnInit() {\n    this.router.events.pipe(\n      filter((event) => event instanceof NavigationStart)\n    ).subscribe((event: NavigationStart) => {\n      // console.log(event)\n      this.previousUrl = this.currentUrl;\n      this.currentUrl = event.url;\n    });\n  }\n\n  ionViewWillEnter() {\n    if (this.previousUrl == '/tabs/product-detail') {\n      this.backBtn = true;\n    }\n    else {\n      this.backBtn = false;\n    }\n    this.getCart();\n  }\n\n  async getCart() {\n    let loading = await this.utility.presentLoading();\n    let response: any = await this.apiService.getCart();\n    loading.dismiss();\n    if (response.status == 1) {\n      this.products_data = response ? response : [];\n      if (this.products_data) {\n        this.totalAmt = response ? response : [];\n        this.products_data = this.products_data.data ? this.products_data.data : [];\n        this.utility.cartNo = this.products_data.length;\n        console.log(this.products_data)\n      }\n    }\n    else {\n      this.products_data = null;\n    }\n  }\n\n  async removeItem(item) {\n    let loading = await this.utility.presentLoading();\n    let packageId = {\n      packageId: item.packageId\n    }\n    let response: any = await this.apiService.removeFromCart(packageId);\n    loading.dismiss();\n    if (response.status == 1) {\n      this.getCart();\n    }\n  }\n\n\n\n  async buyCart() {\nlet onlyDevice =0 ;\n    // this.products_data.map((item)=>{\n    //   console.log(item.details)\n    //   let packageId = parseInt(item.details.packageId)\n    //   if(packageId >= 244 && packageId <= 252) {\n    //     onlyDevice++;\n    //   }\n    //   else{\n    //     onlyDevice-- ;\n    //   }\n\n    // })\n    // console.log(onlyDevice,this.products_data.length)\n    // if(this.products_data.length == onlyDevice){\n    //   this.utility.openPopup(UserModalPage,'payment','sponsor-class',true);\n    // }\n    // else{\n     this.router.navigate([\"/tabs/book-analysis\"]);\n\n    // }\n  }\n\n  async validatePayment() {\n    let result: any = await this.apiService.paymentStatus({\n      paymentId: this.paymentId\n    });\n    if (result.status == 0) {\n      setTimeout(() => {\n        this.validatePayment();\n      }, 2000);\n    } else {\n      this.ionModelOpen = false;\n      this.profile.paymentId = this.paymentId;\n      let data: any = await this.apiService.proceedRegistration(this.profile);\n      this.router.navigate([\"/tabs/area-of-interest\"])\n      if (data.status == 1) {\n        this.utility.presentToast(result.msg, \"bottom\");\n        //this.navController.\n        if (data.redirect_to_questionnaire.toLowerCase() == 'no') {\n          this.router.navigate([\"/tabs/area-of-interest\"])\n\n        } else {\n          this.router.navigate([\"/questionare\"])\n        }\n\n      } else {\n        this.utility.presentToast(result.msg, \"bottom\");\n        return false;\n      }\n    }\n  }\n\n}\n"],"names":[],"sourceRoot":"webpack:///"}
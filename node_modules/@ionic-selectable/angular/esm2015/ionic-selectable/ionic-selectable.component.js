import { __decorate } from "tslib";
import { ElementRef, NgZone, Component, ChangeDetectionStrategy, ContentChild, ViewContainerRef, } from '@angular/core';
import { proxyOutputs, ProxyCmp } from '../utils/proxies-utils';
import { IonicSelectableItemTemplateDirective } from '../directives/ionic-selectable-item-template.directive';
import { IonicSelectableAddItemTemplateDirective } from '../directives/ionic-selectable-add-item-template.directive';
import { IonicSelectableCloseButtonTemplateDirective } from '../directives/ionic-selectable-close-button-template.directive';
import { IonicSelectableFooterTemplateDirective } from '../directives/ionic-selectable-footer-template.directive';
import { IonicSelectableGroupEndTemplateDirective } from '../directives/ionic-selectable-group-end-template.directive';
import { IonicSelectableGroupTemplateDirective } from '../directives/ionic-selectable-group-template.directive';
import { IonicSelectableHeaderTemplateDirective } from '../directives/ionic-selectable-header-template.directive';
import { IonicSelectableIconTemplateDirective } from '../directives/ionic-selectable-icon-template.directive';
import { IonicSelectableItemEndTemplateDirective } from '../directives/ionic-selectable-item-end-template.directive';
import { IonicSelectableItemIconTemplateDirective } from '../directives/ionic-selectable-item-icon-template.directive';
import { IonicSelectableMessageTemplateDirective } from '../directives/ionic-selectable-message-template.directive';
import { IonicSelectablePlaceholderTemplateDirective } from '../directives/ionic-selectable-placeholder-template.directive';
import { IonicSelectableSearchFailTemplateDirective } from '../directives/ionic-selectable-search-fail-template.directive';
import { IonicSelectableTitleTemplateDirective } from '../directives/ionic-selectable-title-template.directive';
import { IonicSelectableValueTemplateDirective } from '../directives/ionic-selectable-value-template.directive';
let IonicSelectableComponent = class IonicSelectableComponent {
    constructor(elementRef, z, viewContainerRef) {
        this.elementRef = elementRef;
        this.z = z;
        this.viewContainerRef = viewContainerRef;
        this.refMap = new WeakMap();
        this.el = this.elementRef.nativeElement;
        this.el.templateRender = this.render.bind(this);
        this.el.hasTemplateRender = this.hasTemplate.bind(this);
        proxyOutputs(this, this.el, [
            'infiniteScrolled',
            'searching',
            'searchFailed',
            'searchSuccessed',
            'itemAdding',
            'cleared',
            'changed',
            'itemsChanged',
            'selected',
            'opened',
            'closed',
            'focused',
            'blurred',
        ]);
    }
    render(element, template) {
        this.z.run(() => {
            if (template.type === 'addItem') {
                if (!element) {
                    this.refAddItem = null;
                    return;
                }
                if (!this.refAddItem) {
                    this.createEmbeddedView(element, template);
                }
                else {
                    this.updateEmbeddedView(element, template);
                }
            }
            else {
                if (!element.isConnected && element.firstElementChild) {
                    this.refMap.delete(element);
                    return;
                }
                if (!this.refMap.get(element)) {
                    this.createEmbeddedView(element, template);
                }
                else {
                    this.updateEmbeddedView(element, template);
                }
            }
        });
    }
    createEmbeddedView(element, template) {
        const node = this.viewContainerRef.createEmbeddedView(this.getComponent(template.type), {
            $implicit: template.value,
            isItemSelected: template.isItemSelected,
            isItemDisabled: template.isItemDisabled,
            isAdd: template.isAdd,
            type: template.type,
        });
        const childElement = getElement(node);
        element.appendChild(childElement);
        if (template.type === 'addItem') {
            childElement.classList.add('ion-page');
            this.refAddItem = node;
        }
        else {
            this.refMap.set(element, node);
        }
        // run sync change detections
        node.detectChanges();
    }
    updateEmbeddedView(element, template) {
        const node = template.type === 'addItem' ? this.refAddItem : this.refMap.get(element);
        const ctx = node.context;
        if (template.type !== ctx.type) {
            element.removeChild(element.lastChild);
            this.createEmbeddedView(element, template);
            return;
        }
        ctx.$implicit = template.value;
        ctx.isItemSelected = template.isItemSelected;
        ctx.isItemDisabled = template.isItemDisabled;
        ctx.isAdd = template.isAdd;
        // run sync change detections
        node.detectChanges();
    }
    hasTemplate(type) {
        switch (type) {
            case 'addItem':
                return !!this.ionicSelectableAddItemTemplateDirective;
            case 'closeButton':
                return !!this.ionicSelectableCloseButtonTemplateDirective;
            case 'footer':
                return !!this.ionicSelectableFooterTemplateDirective;
            case 'groupEnd':
                return !!this.ionicSelectableGroupEndTemplateDirective;
            case 'group':
                return !!this.ionicSelectableGroupTemplateDirective;
            case 'header':
                return !!this.ionicSelectableHeaderTemplateDirective;
            case 'icon':
                return !!this.ionicSelectableIconTemplateDirective;
            case 'item':
                return !!this.ionicSelectableItemTemplateDirective;
            case 'itemEnd':
                return !!this.ionicSelectableItemEndTemplateDirective;
            case 'itemIcon':
                return !!this.ionicSelectableItemIconTemplateDirective;
            case 'message':
                return !!this.ionicSelectableMessageTemplateDirective;
            case 'placeholder':
                return !!this.ionicSelectablePlaceholderTemplateDirective;
            case 'searchFail':
                return !!this.ionicSelectableSearchFailTemplateDirective;
            case 'title':
                return !!this.ionicSelectableTitleTemplateDirective;
            case 'value':
                return !!this.ionicSelectableValueTemplateDirective;
            default:
                return false;
        }
    }
    getComponent(type) {
        switch (type) {
            case 'addItem':
                return this.ionicSelectableAddItemTemplateDirective.templateRef;
            case 'closeButton':
                return this.ionicSelectableCloseButtonTemplateDirective.templateRef;
            case 'footer':
                return this.ionicSelectableFooterTemplateDirective.templateRef;
            case 'groupEnd':
                return this.ionicSelectableGroupEndTemplateDirective.templateRef;
            case 'group':
                return this.ionicSelectableGroupTemplateDirective.templateRef;
            case 'header':
                return this.ionicSelectableHeaderTemplateDirective.templateRef;
            case 'icon':
                return this.ionicSelectableIconTemplateDirective.templateRef;
            case 'item':
                return this.ionicSelectableItemTemplateDirective.templateRef;
            case 'itemEnd':
                return this.ionicSelectableItemEndTemplateDirective.templateRef;
            case 'itemIcon':
                return this.ionicSelectableItemIconTemplateDirective.templateRef;
            case 'message':
                return this.ionicSelectableMessageTemplateDirective.templateRef;
            case 'placeholder':
                return this.ionicSelectablePlaceholderTemplateDirective.templateRef;
            case 'searchFail':
                return this.ionicSelectableSearchFailTemplateDirective.templateRef;
            case 'title':
                return this.ionicSelectableTitleTemplateDirective.templateRef;
            case 'value':
                return this.ionicSelectableValueTemplateDirective.templateRef;
            default:
                throw new Error(`template for ${type} was not provided`);
        }
    }
};
IonicSelectableComponent.decorators = [
    { type: Component, args: [{
                selector: 'ionic-selectable',
                changeDetection: ChangeDetectionStrategy.OnPush,
                template: '<ng-content></ng-content>',
                inputs: [
                    'isOpened',
                    'isDisabled',
                    'placeholder',
                    'closeButtonText',
                    'closeButtonSlot',
                    'itemIconSlot',
                    'confirmButtonText',
                    'clearButtonText',
                    'addButtonText',
                    'name',
                    'selectedText',
                    'isMultiple',
                    'value',
                    'shouldStoreItemValue',
                    'items',
                    'disabledItems',
                    'itemValueField',
                    'itemTextField',
                    'shouldBackdropClose',
                    'modalCssClass',
                    'modalEnterAnimation',
                    'modalLeaveAnimation',
                    'titleText',
                    'groupValueField',
                    'groupTextField',
                    'hasInfiniteScroll',
                    'infiniteScrollThreshold',
                    'hasVirtualScroll',
                    'virtualScrollApproxHeaderHeight',
                    'virtualScrollApproxItemHeight',
                    'hasConfirmButton',
                    'canAddItem',
                    'canClear',
                    'canSearch',
                    'shouldDelegateSearchToEvent',
                    'searchDebounce',
                    'searchPlaceholder',
                    'searchText',
                    'shouldFocusSearchbar',
                    'hasSearchText',
                    'searchCancelButtonIcon',
                    'searchCancelButtonText',
                    'searchClearIcon',
                    'searchInputmode',
                    'searchIcon',
                    'searchShowCancelButton',
                    'isConfirmButtonEnabled',
                    'headerColor',
                    'groupColor',
                    'virtualScrollHeaderFn',
                ]
            },] }
];
IonicSelectableComponent.ctorParameters = () => [
    { type: ElementRef },
    { type: NgZone },
    { type: ViewContainerRef }
];
IonicSelectableComponent.propDecorators = {
    ionicSelectableAddItemTemplateDirective: [{ type: ContentChild, args: [IonicSelectableAddItemTemplateDirective, { static: false },] }],
    ionicSelectableCloseButtonTemplateDirective: [{ type: ContentChild, args: [IonicSelectableCloseButtonTemplateDirective, { static: false },] }],
    ionicSelectableFooterTemplateDirective: [{ type: ContentChild, args: [IonicSelectableFooterTemplateDirective, { static: false },] }],
    ionicSelectableGroupEndTemplateDirective: [{ type: ContentChild, args: [IonicSelectableGroupEndTemplateDirective, { static: false },] }],
    ionicSelectableGroupTemplateDirective: [{ type: ContentChild, args: [IonicSelectableGroupTemplateDirective, { static: false },] }],
    ionicSelectableHeaderTemplateDirective: [{ type: ContentChild, args: [IonicSelectableHeaderTemplateDirective, { static: false },] }],
    ionicSelectableIconTemplateDirective: [{ type: ContentChild, args: [IonicSelectableIconTemplateDirective, { static: false },] }],
    ionicSelectableItemEndTemplateDirective: [{ type: ContentChild, args: [IonicSelectableItemEndTemplateDirective, { static: false },] }],
    ionicSelectableItemIconTemplateDirective: [{ type: ContentChild, args: [IonicSelectableItemIconTemplateDirective, { static: false },] }],
    ionicSelectableItemTemplateDirective: [{ type: ContentChild, args: [IonicSelectableItemTemplateDirective, { static: false },] }],
    ionicSelectableMessageTemplateDirective: [{ type: ContentChild, args: [IonicSelectableMessageTemplateDirective, { static: false },] }],
    ionicSelectablePlaceholderTemplateDirective: [{ type: ContentChild, args: [IonicSelectablePlaceholderTemplateDirective, { static: false },] }],
    ionicSelectableSearchFailTemplateDirective: [{ type: ContentChild, args: [IonicSelectableSearchFailTemplateDirective, { static: false },] }],
    ionicSelectableTitleTemplateDirective: [{ type: ContentChild, args: [IonicSelectableTitleTemplateDirective, { static: false },] }],
    ionicSelectableValueTemplateDirective: [{ type: ContentChild, args: [IonicSelectableValueTemplateDirective, { static: false },] }]
};
IonicSelectableComponent = __decorate([
    ProxyCmp({
        inputs: [
            'isOpened',
            'isDisabled',
            'placeholder',
            'closeButtonText',
            'closeButtonSlot',
            'itemIconSlot',
            'confirmButtonText',
            'clearButtonText',
            'addButtonText',
            'name',
            'selectedText',
            'isMultiple',
            'value',
            'shouldStoreItemValue',
            'items',
            'disabledItems',
            'itemValueField',
            'itemTextField',
            'shouldBackdropClose',
            'modalCssClass',
            'modalEnterAnimation',
            'modalLeaveAnimation',
            'titleText',
            'groupValueField',
            'groupTextField',
            'hasInfiniteScroll',
            'infiniteScrollThreshold',
            'hasVirtualScroll',
            'virtualScrollApproxHeaderHeight',
            'virtualScrollApproxItemHeight',
            'hasConfirmButton',
            'canAddItem',
            'canClear',
            'canSearch',
            'shouldDelegateSearchToEvent',
            'searchDebounce',
            'searchPlaceholder',
            'searchText',
            'shouldFocusSearchbar',
            'hasSearchText',
            'searchCancelButtonIcon',
            'searchCancelButtonText',
            'searchClearIcon',
            'searchInputmode',
            'searchIcon',
            'searchShowCancelButton',
            'isConfirmButtonEnabled',
            'headerColor',
            'groupColor',
            'virtualScrollHeaderFn',
        ],
        methods: [
            'hasValue',
            'open',
            'close',
            'getItemsToConfirm',
            'confirm',
            'clear',
            'enableInfiniteScroll',
            'disableInfiniteScroll',
            'endInfiniteScroll',
            'scrollToTop',
            'scrollToBottom',
            'startSearch',
            'endSearch',
            'showLoading',
            'hideLoading',
            'addItem',
            'deleteItem',
            'toggleItems',
            'showAddItemTemplate',
            'hideAddItemTemplate',
            '',
        ],
    })
], IonicSelectableComponent);
export { IonicSelectableComponent };
const getElement = (view) => {
    const rootNodes = view.rootNodes;
    for (let i = 0; i < rootNodes.length; i++) {
        if (rootNodes[i].nodeType === 1) {
            return rootNodes[i];
        }
    }
    throw new Error('element was not created');
};
const ɵ0 = getElement;
export { ɵ0 };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW9uaWMtc2VsZWN0YWJsZS5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvaW9uaWMtc2VsZWN0YWJsZS9pb25pYy1zZWxlY3RhYmxlLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsT0FBTyxFQUVMLFVBQVUsRUFDVixNQUFNLEVBQ04sU0FBUyxFQUNULHVCQUF1QixFQUN2QixZQUFZLEVBRVosZ0JBQWdCLEdBRWpCLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFBRSxZQUFZLEVBQUUsUUFBUSxFQUFFLE1BQU0sd0JBQXdCLENBQUM7QUFFaEUsT0FBTyxFQUFFLG9DQUFvQyxFQUFFLE1BQU0sd0RBQXdELENBQUM7QUFFOUcsT0FBTyxFQUFFLHVDQUF1QyxFQUFFLE1BQU0sNERBQTRELENBQUM7QUFDckgsT0FBTyxFQUFFLDJDQUEyQyxFQUFFLE1BQU0sZ0VBQWdFLENBQUM7QUFDN0gsT0FBTyxFQUFFLHNDQUFzQyxFQUFFLE1BQU0sMERBQTBELENBQUM7QUFDbEgsT0FBTyxFQUFFLHdDQUF3QyxFQUFFLE1BQU0sNkRBQTZELENBQUM7QUFDdkgsT0FBTyxFQUFFLHFDQUFxQyxFQUFFLE1BQU0seURBQXlELENBQUM7QUFDaEgsT0FBTyxFQUFFLHNDQUFzQyxFQUFFLE1BQU0sMERBQTBELENBQUM7QUFDbEgsT0FBTyxFQUFFLG9DQUFvQyxFQUFFLE1BQU0sd0RBQXdELENBQUM7QUFDOUcsT0FBTyxFQUFFLHVDQUF1QyxFQUFFLE1BQU0sNERBQTRELENBQUM7QUFDckgsT0FBTyxFQUFFLHdDQUF3QyxFQUFFLE1BQU0sNkRBQTZELENBQUM7QUFDdkgsT0FBTyxFQUFFLHVDQUF1QyxFQUFFLE1BQU0sMkRBQTJELENBQUM7QUFDcEgsT0FBTyxFQUFFLDJDQUEyQyxFQUFFLE1BQU0sK0RBQStELENBQUM7QUFDNUgsT0FBTyxFQUFFLDBDQUEwQyxFQUFFLE1BQU0sK0RBQStELENBQUM7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QUF3QixDQTROcEM7U0E1Tlksd0JBQXdCO0FBOE5yQyxNQUFNLFVBQVUsR0FBRyxDQUFDLElBQXNDLEVBQWUsRUFBRTtJQUN6RSxNQUFNLFNBQVMsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDO0lBQ2pDLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxTQUFTLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO1FBQ3pDLElBQUksU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLFFBQVEsS0FBSyxDQUFDLEVBQUU7WUFDL0IsT0FBTyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FDckI7S0FDRjtJQUNELE1BQU0sSUFBSSxLQUFLLENBQUMseUJBQXlCLENBQUMsQ0FBQztBQUM3QyxDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBFdmVudEVtaXR0ZXIsXG4gIEVsZW1lbnRSZWYsXG4gIE5nWm9uZSxcbiAgQ29tcG9uZW50LFxuICBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSxcbiAgQ29udGVudENoaWxkLFxuICBFbWJlZGRlZFZpZXdSZWYsXG4gIFZpZXdDb250YWluZXJSZWYsXG4gIFRlbXBsYXRlUmVmLFxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IHByb3h5T3V0cHV0cywgUHJveHlDbXAgfSBmcm9tICcuLi91dGlscy9wcm94aWVzLXV0aWxzJztcbmltcG9ydCB7IENvbXBvbmVudHMsIElUZW1wbGF0ZSwgVGVtcGxhdGVUeXBlIH0gZnJvbSAnQGlvbmljLXNlbGVjdGFibGUvY29yZSc7XG5pbXBvcnQgeyBJb25pY1NlbGVjdGFibGVJdGVtVGVtcGxhdGVEaXJlY3RpdmUgfSBmcm9tICcuLi9kaXJlY3RpdmVzL2lvbmljLXNlbGVjdGFibGUtaXRlbS10ZW1wbGF0ZS5kaXJlY3RpdmUnO1xuaW1wb3J0IHsgVGVtcGxhdGVDb250ZXh0IH0gZnJvbSAnLi4vdXRpbHMvdXRpbCc7XG5pbXBvcnQgeyBJb25pY1NlbGVjdGFibGVBZGRJdGVtVGVtcGxhdGVEaXJlY3RpdmUgfSBmcm9tICcuLi9kaXJlY3RpdmVzL2lvbmljLXNlbGVjdGFibGUtYWRkLWl0ZW0tdGVtcGxhdGUuZGlyZWN0aXZlJztcbmltcG9ydCB7IElvbmljU2VsZWN0YWJsZUNsb3NlQnV0dG9uVGVtcGxhdGVEaXJlY3RpdmUgfSBmcm9tICcuLi9kaXJlY3RpdmVzL2lvbmljLXNlbGVjdGFibGUtY2xvc2UtYnV0dG9uLXRlbXBsYXRlLmRpcmVjdGl2ZSc7XG5pbXBvcnQgeyBJb25pY1NlbGVjdGFibGVGb290ZXJUZW1wbGF0ZURpcmVjdGl2ZSB9IGZyb20gJy4uL2RpcmVjdGl2ZXMvaW9uaWMtc2VsZWN0YWJsZS1mb290ZXItdGVtcGxhdGUuZGlyZWN0aXZlJztcbmltcG9ydCB7IElvbmljU2VsZWN0YWJsZUdyb3VwRW5kVGVtcGxhdGVEaXJlY3RpdmUgfSBmcm9tICcuLi9kaXJlY3RpdmVzL2lvbmljLXNlbGVjdGFibGUtZ3JvdXAtZW5kLXRlbXBsYXRlLmRpcmVjdGl2ZSc7XG5pbXBvcnQgeyBJb25pY1NlbGVjdGFibGVHcm91cFRlbXBsYXRlRGlyZWN0aXZlIH0gZnJvbSAnLi4vZGlyZWN0aXZlcy9pb25pYy1zZWxlY3RhYmxlLWdyb3VwLXRlbXBsYXRlLmRpcmVjdGl2ZSc7XG5pbXBvcnQgeyBJb25pY1NlbGVjdGFibGVIZWFkZXJUZW1wbGF0ZURpcmVjdGl2ZSB9IGZyb20gJy4uL2RpcmVjdGl2ZXMvaW9uaWMtc2VsZWN0YWJsZS1oZWFkZXItdGVtcGxhdGUuZGlyZWN0aXZlJztcbmltcG9ydCB7IElvbmljU2VsZWN0YWJsZUljb25UZW1wbGF0ZURpcmVjdGl2ZSB9IGZyb20gJy4uL2RpcmVjdGl2ZXMvaW9uaWMtc2VsZWN0YWJsZS1pY29uLXRlbXBsYXRlLmRpcmVjdGl2ZSc7XG5pbXBvcnQgeyBJb25pY1NlbGVjdGFibGVJdGVtRW5kVGVtcGxhdGVEaXJlY3RpdmUgfSBmcm9tICcuLi9kaXJlY3RpdmVzL2lvbmljLXNlbGVjdGFibGUtaXRlbS1lbmQtdGVtcGxhdGUuZGlyZWN0aXZlJztcbmltcG9ydCB7IElvbmljU2VsZWN0YWJsZUl0ZW1JY29uVGVtcGxhdGVEaXJlY3RpdmUgfSBmcm9tICcuLi9kaXJlY3RpdmVzL2lvbmljLXNlbGVjdGFibGUtaXRlbS1pY29uLXRlbXBsYXRlLmRpcmVjdGl2ZSc7XG5pbXBvcnQgeyBJb25pY1NlbGVjdGFibGVNZXNzYWdlVGVtcGxhdGVEaXJlY3RpdmUgfSBmcm9tICcuLi9kaXJlY3RpdmVzL2lvbmljLXNlbGVjdGFibGUtbWVzc2FnZS10ZW1wbGF0ZS5kaXJlY3RpdmUnO1xuaW1wb3J0IHsgSW9uaWNTZWxlY3RhYmxlUGxhY2Vob2xkZXJUZW1wbGF0ZURpcmVjdGl2ZSB9IGZyb20gJy4uL2RpcmVjdGl2ZXMvaW9uaWMtc2VsZWN0YWJsZS1wbGFjZWhvbGRlci10ZW1wbGF0ZS5kaXJlY3RpdmUnO1xuaW1wb3J0IHsgSW9uaWNTZWxlY3RhYmxlU2VhcmNoRmFpbFRlbXBsYXRlRGlyZWN0aXZlIH0gZnJvbSAnLi4vZGlyZWN0aXZlcy9pb25pYy1zZWxlY3RhYmxlLXNlYXJjaC1mYWlsLXRlbXBsYXRlLmRpcmVjdGl2ZSc7XG5pbXBvcnQgeyBJb25pY1NlbGVjdGFibGVUaXRsZVRlbXBsYXRlRGlyZWN0aXZlIH0gZnJvbSAnLi4vZGlyZWN0aXZlcy9pb25pYy1zZWxlY3RhYmxlLXRpdGxlLXRlbXBsYXRlLmRpcmVjdGl2ZSc7XG5pbXBvcnQgeyBJb25pY1NlbGVjdGFibGVWYWx1ZVRlbXBsYXRlRGlyZWN0aXZlIH0gZnJvbSAnLi4vZGlyZWN0aXZlcy9pb25pYy1zZWxlY3RhYmxlLXZhbHVlLXRlbXBsYXRlLmRpcmVjdGl2ZSc7XG5cbmV4cG9ydCBkZWNsYXJlIGludGVyZmFjZSBJb25pY1NlbGVjdGFibGVDb21wb25lbnQgZXh0ZW5kcyBDb21wb25lbnRzLklvbmljU2VsZWN0YWJsZSB7fVxuXG5AUHJveHlDbXAoe1xuICBpbnB1dHM6IFtcbiAgICAnaXNPcGVuZWQnLFxuICAgICdpc0Rpc2FibGVkJyxcbiAgICAncGxhY2Vob2xkZXInLFxuICAgICdjbG9zZUJ1dHRvblRleHQnLFxuICAgICdjbG9zZUJ1dHRvblNsb3QnLFxuICAgICdpdGVtSWNvblNsb3QnLFxuICAgICdjb25maXJtQnV0dG9uVGV4dCcsXG4gICAgJ2NsZWFyQnV0dG9uVGV4dCcsXG4gICAgJ2FkZEJ1dHRvblRleHQnLFxuICAgICduYW1lJyxcbiAgICAnc2VsZWN0ZWRUZXh0JyxcbiAgICAnaXNNdWx0aXBsZScsXG4gICAgJ3ZhbHVlJyxcbiAgICAnc2hvdWxkU3RvcmVJdGVtVmFsdWUnLFxuICAgICdpdGVtcycsXG4gICAgJ2Rpc2FibGVkSXRlbXMnLFxuICAgICdpdGVtVmFsdWVGaWVsZCcsXG4gICAgJ2l0ZW1UZXh0RmllbGQnLFxuICAgICdzaG91bGRCYWNrZHJvcENsb3NlJyxcbiAgICAnbW9kYWxDc3NDbGFzcycsXG4gICAgJ21vZGFsRW50ZXJBbmltYXRpb24nLFxuICAgICdtb2RhbExlYXZlQW5pbWF0aW9uJyxcbiAgICAndGl0bGVUZXh0JyxcbiAgICAnZ3JvdXBWYWx1ZUZpZWxkJyxcbiAgICAnZ3JvdXBUZXh0RmllbGQnLFxuICAgICdoYXNJbmZpbml0ZVNjcm9sbCcsXG4gICAgJ2luZmluaXRlU2Nyb2xsVGhyZXNob2xkJyxcbiAgICAnaGFzVmlydHVhbFNjcm9sbCcsXG4gICAgJ3ZpcnR1YWxTY3JvbGxBcHByb3hIZWFkZXJIZWlnaHQnLFxuICAgICd2aXJ0dWFsU2Nyb2xsQXBwcm94SXRlbUhlaWdodCcsXG4gICAgJ2hhc0NvbmZpcm1CdXR0b24nLFxuICAgICdjYW5BZGRJdGVtJyxcbiAgICAnY2FuQ2xlYXInLFxuICAgICdjYW5TZWFyY2gnLFxuICAgICdzaG91bGREZWxlZ2F0ZVNlYXJjaFRvRXZlbnQnLFxuICAgICdzZWFyY2hEZWJvdW5jZScsXG4gICAgJ3NlYXJjaFBsYWNlaG9sZGVyJyxcbiAgICAnc2VhcmNoVGV4dCcsXG4gICAgJ3Nob3VsZEZvY3VzU2VhcmNoYmFyJyxcbiAgICAnaGFzU2VhcmNoVGV4dCcsXG4gICAgJ3NlYXJjaENhbmNlbEJ1dHRvbkljb24nLFxuICAgICdzZWFyY2hDYW5jZWxCdXR0b25UZXh0JyxcbiAgICAnc2VhcmNoQ2xlYXJJY29uJyxcbiAgICAnc2VhcmNoSW5wdXRtb2RlJyxcbiAgICAnc2VhcmNoSWNvbicsXG4gICAgJ3NlYXJjaFNob3dDYW5jZWxCdXR0b24nLFxuICAgICdpc0NvbmZpcm1CdXR0b25FbmFibGVkJyxcbiAgICAnaGVhZGVyQ29sb3InLFxuICAgICdncm91cENvbG9yJyxcbiAgICAndmlydHVhbFNjcm9sbEhlYWRlckZuJyxcbiAgXSxcbiAgbWV0aG9kczogW1xuICAgICdoYXNWYWx1ZScsXG4gICAgJ29wZW4nLFxuICAgICdjbG9zZScsXG4gICAgJ2dldEl0ZW1zVG9Db25maXJtJyxcbiAgICAnY29uZmlybScsXG4gICAgJ2NsZWFyJyxcbiAgICAnZW5hYmxlSW5maW5pdGVTY3JvbGwnLFxuICAgICdkaXNhYmxlSW5maW5pdGVTY3JvbGwnLFxuICAgICdlbmRJbmZpbml0ZVNjcm9sbCcsXG4gICAgJ3Njcm9sbFRvVG9wJyxcbiAgICAnc2Nyb2xsVG9Cb3R0b20nLFxuICAgICdzdGFydFNlYXJjaCcsXG4gICAgJ2VuZFNlYXJjaCcsXG4gICAgJ3Nob3dMb2FkaW5nJyxcbiAgICAnaGlkZUxvYWRpbmcnLFxuICAgICdhZGRJdGVtJyxcbiAgICAnZGVsZXRlSXRlbScsXG4gICAgJ3RvZ2dsZUl0ZW1zJyxcbiAgICAnc2hvd0FkZEl0ZW1UZW1wbGF0ZScsXG4gICAgJ2hpZGVBZGRJdGVtVGVtcGxhdGUnLFxuICAgICcnLFxuICBdLFxufSlcbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2lvbmljLXNlbGVjdGFibGUnLFxuICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCxcbiAgdGVtcGxhdGU6ICc8bmctY29udGVudD48L25nLWNvbnRlbnQ+JyxcbiAgaW5wdXRzOiBbXG4gICAgJ2lzT3BlbmVkJyxcbiAgICAnaXNEaXNhYmxlZCcsXG4gICAgJ3BsYWNlaG9sZGVyJyxcbiAgICAnY2xvc2VCdXR0b25UZXh0JyxcbiAgICAnY2xvc2VCdXR0b25TbG90JyxcbiAgICAnaXRlbUljb25TbG90JyxcbiAgICAnY29uZmlybUJ1dHRvblRleHQnLFxuICAgICdjbGVhckJ1dHRvblRleHQnLFxuICAgICdhZGRCdXR0b25UZXh0JyxcbiAgICAnbmFtZScsXG4gICAgJ3NlbGVjdGVkVGV4dCcsXG4gICAgJ2lzTXVsdGlwbGUnLFxuICAgICd2YWx1ZScsXG4gICAgJ3Nob3VsZFN0b3JlSXRlbVZhbHVlJyxcbiAgICAnaXRlbXMnLFxuICAgICdkaXNhYmxlZEl0ZW1zJyxcbiAgICAnaXRlbVZhbHVlRmllbGQnLFxuICAgICdpdGVtVGV4dEZpZWxkJyxcbiAgICAnc2hvdWxkQmFja2Ryb3BDbG9zZScsXG4gICAgJ21vZGFsQ3NzQ2xhc3MnLFxuICAgICdtb2RhbEVudGVyQW5pbWF0aW9uJyxcbiAgICAnbW9kYWxMZWF2ZUFuaW1hdGlvbicsXG4gICAgJ3RpdGxlVGV4dCcsXG4gICAgJ2dyb3VwVmFsdWVGaWVsZCcsXG4gICAgJ2dyb3VwVGV4dEZpZWxkJyxcbiAgICAnaGFzSW5maW5pdGVTY3JvbGwnLFxuICAgICdpbmZpbml0ZVNjcm9sbFRocmVzaG9sZCcsXG4gICAgJ2hhc1ZpcnR1YWxTY3JvbGwnLFxuICAgICd2aXJ0dWFsU2Nyb2xsQXBwcm94SGVhZGVySGVpZ2h0JyxcbiAgICAndmlydHVhbFNjcm9sbEFwcHJveEl0ZW1IZWlnaHQnLFxuICAgICdoYXNDb25maXJtQnV0dG9uJyxcbiAgICAnY2FuQWRkSXRlbScsXG4gICAgJ2NhbkNsZWFyJyxcbiAgICAnY2FuU2VhcmNoJyxcbiAgICAnc2hvdWxkRGVsZWdhdGVTZWFyY2hUb0V2ZW50JyxcbiAgICAnc2VhcmNoRGVib3VuY2UnLFxuICAgICdzZWFyY2hQbGFjZWhvbGRlcicsXG4gICAgJ3NlYXJjaFRleHQnLFxuICAgICdzaG91bGRGb2N1c1NlYXJjaGJhcicsXG4gICAgJ2hhc1NlYXJjaFRleHQnLFxuICAgICdzZWFyY2hDYW5jZWxCdXR0b25JY29uJyxcbiAgICAnc2VhcmNoQ2FuY2VsQnV0dG9uVGV4dCcsXG4gICAgJ3NlYXJjaENsZWFySWNvbicsXG4gICAgJ3NlYXJjaElucHV0bW9kZScsXG4gICAgJ3NlYXJjaEljb24nLFxuICAgICdzZWFyY2hTaG93Q2FuY2VsQnV0dG9uJyxcbiAgICAnaXNDb25maXJtQnV0dG9uRW5hYmxlZCcsXG4gICAgJ2hlYWRlckNvbG9yJyxcbiAgICAnZ3JvdXBDb2xvcicsXG4gICAgJ3ZpcnR1YWxTY3JvbGxIZWFkZXJGbicsXG4gIF0sXG59KVxuZXhwb3J0IGNsYXNzIElvbmljU2VsZWN0YWJsZUNvbXBvbmVudCB7XG4gIGluZmluaXRlU2Nyb2xsZWQhOiBFdmVudEVtaXR0ZXI8Q3VzdG9tRXZlbnQ+O1xuICBzZWFyY2hpbmchOiBFdmVudEVtaXR0ZXI8Q3VzdG9tRXZlbnQ+O1xuICBzZWFyY2hGYWlsZWQhOiBFdmVudEVtaXR0ZXI8Q3VzdG9tRXZlbnQ+O1xuICBzZWFyY2hTdWNjZXNzZWQhOiBFdmVudEVtaXR0ZXI8Q3VzdG9tRXZlbnQ+O1xuICBpdGVtQWRkaW5nITogRXZlbnRFbWl0dGVyPEN1c3RvbUV2ZW50PjtcbiAgY2xlYXJlZCE6IEV2ZW50RW1pdHRlcjxDdXN0b21FdmVudD47XG4gIGNoYW5nZWQhOiBFdmVudEVtaXR0ZXI8Q3VzdG9tRXZlbnQ+O1xuICBpdGVtc0NoYW5nZWQhOiBFdmVudEVtaXR0ZXI8Q3VzdG9tRXZlbnQ+O1xuICBzZWxlY3RlZCE6IEV2ZW50RW1pdHRlcjxDdXN0b21FdmVudD47XG4gIG9wZW5lZCE6IEV2ZW50RW1pdHRlcjxDdXN0b21FdmVudD47XG4gIGNsb3NlZCE6IEV2ZW50RW1pdHRlcjxDdXN0b21FdmVudD47XG4gIGZvY3VzZWQhOiBFdmVudEVtaXR0ZXI8Q3VzdG9tRXZlbnQ+O1xuICBibHVycmVkITogRXZlbnRFbWl0dGVyPEN1c3RvbUV2ZW50PjtcblxuICBwcm90ZWN0ZWQgZWw6IEhUTUxJb25pY1NlbGVjdGFibGVFbGVtZW50O1xuICBwcml2YXRlIHJlZk1hcCA9IG5ldyBXZWFrTWFwPEhUTUxFbGVtZW50LCBFbWJlZGRlZFZpZXdSZWY8VGVtcGxhdGVDb250ZXh0Pj4oKTtcbiAgcHJpdmF0ZSByZWZBZGRJdGVtOiBFbWJlZGRlZFZpZXdSZWY8VGVtcGxhdGVDb250ZXh0PjtcblxuICBAQ29udGVudENoaWxkKElvbmljU2VsZWN0YWJsZUFkZEl0ZW1UZW1wbGF0ZURpcmVjdGl2ZSwgeyBzdGF0aWM6IGZhbHNlIH0pXG4gIGlvbmljU2VsZWN0YWJsZUFkZEl0ZW1UZW1wbGF0ZURpcmVjdGl2ZSE6IElvbmljU2VsZWN0YWJsZUFkZEl0ZW1UZW1wbGF0ZURpcmVjdGl2ZTtcblxuICBAQ29udGVudENoaWxkKElvbmljU2VsZWN0YWJsZUNsb3NlQnV0dG9uVGVtcGxhdGVEaXJlY3RpdmUsIHsgc3RhdGljOiBmYWxzZSB9KVxuICBpb25pY1NlbGVjdGFibGVDbG9zZUJ1dHRvblRlbXBsYXRlRGlyZWN0aXZlITogSW9uaWNTZWxlY3RhYmxlQ2xvc2VCdXR0b25UZW1wbGF0ZURpcmVjdGl2ZTtcblxuICBAQ29udGVudENoaWxkKElvbmljU2VsZWN0YWJsZUZvb3RlclRlbXBsYXRlRGlyZWN0aXZlLCB7IHN0YXRpYzogZmFsc2UgfSlcbiAgaW9uaWNTZWxlY3RhYmxlRm9vdGVyVGVtcGxhdGVEaXJlY3RpdmUhOiBJb25pY1NlbGVjdGFibGVGb290ZXJUZW1wbGF0ZURpcmVjdGl2ZTtcblxuICBAQ29udGVudENoaWxkKElvbmljU2VsZWN0YWJsZUdyb3VwRW5kVGVtcGxhdGVEaXJlY3RpdmUsIHsgc3RhdGljOiBmYWxzZSB9KVxuICBpb25pY1NlbGVjdGFibGVHcm91cEVuZFRlbXBsYXRlRGlyZWN0aXZlITogSW9uaWNTZWxlY3RhYmxlR3JvdXBFbmRUZW1wbGF0ZURpcmVjdGl2ZTtcblxuICBAQ29udGVudENoaWxkKElvbmljU2VsZWN0YWJsZUdyb3VwVGVtcGxhdGVEaXJlY3RpdmUsIHsgc3RhdGljOiBmYWxzZSB9KVxuICBpb25pY1NlbGVjdGFibGVHcm91cFRlbXBsYXRlRGlyZWN0aXZlITogSW9uaWNTZWxlY3RhYmxlR3JvdXBUZW1wbGF0ZURpcmVjdGl2ZTtcblxuICBAQ29udGVudENoaWxkKElvbmljU2VsZWN0YWJsZUhlYWRlclRlbXBsYXRlRGlyZWN0aXZlLCB7IHN0YXRpYzogZmFsc2UgfSlcbiAgaW9uaWNTZWxlY3RhYmxlSGVhZGVyVGVtcGxhdGVEaXJlY3RpdmUhOiBJb25pY1NlbGVjdGFibGVIZWFkZXJUZW1wbGF0ZURpcmVjdGl2ZTtcblxuICBAQ29udGVudENoaWxkKElvbmljU2VsZWN0YWJsZUljb25UZW1wbGF0ZURpcmVjdGl2ZSwgeyBzdGF0aWM6IGZhbHNlIH0pXG4gIGlvbmljU2VsZWN0YWJsZUljb25UZW1wbGF0ZURpcmVjdGl2ZSE6IElvbmljU2VsZWN0YWJsZUljb25UZW1wbGF0ZURpcmVjdGl2ZTtcblxuICBAQ29udGVudENoaWxkKElvbmljU2VsZWN0YWJsZUl0ZW1FbmRUZW1wbGF0ZURpcmVjdGl2ZSwgeyBzdGF0aWM6IGZhbHNlIH0pXG4gIGlvbmljU2VsZWN0YWJsZUl0ZW1FbmRUZW1wbGF0ZURpcmVjdGl2ZSE6IElvbmljU2VsZWN0YWJsZUl0ZW1FbmRUZW1wbGF0ZURpcmVjdGl2ZTtcblxuICBAQ29udGVudENoaWxkKElvbmljU2VsZWN0YWJsZUl0ZW1JY29uVGVtcGxhdGVEaXJlY3RpdmUsIHsgc3RhdGljOiBmYWxzZSB9KVxuICBpb25pY1NlbGVjdGFibGVJdGVtSWNvblRlbXBsYXRlRGlyZWN0aXZlITogSW9uaWNTZWxlY3RhYmxlSXRlbUljb25UZW1wbGF0ZURpcmVjdGl2ZTtcblxuICBAQ29udGVudENoaWxkKElvbmljU2VsZWN0YWJsZUl0ZW1UZW1wbGF0ZURpcmVjdGl2ZSwgeyBzdGF0aWM6IGZhbHNlIH0pXG4gIGlvbmljU2VsZWN0YWJsZUl0ZW1UZW1wbGF0ZURpcmVjdGl2ZSE6IElvbmljU2VsZWN0YWJsZUl0ZW1UZW1wbGF0ZURpcmVjdGl2ZTtcblxuICBAQ29udGVudENoaWxkKElvbmljU2VsZWN0YWJsZU1lc3NhZ2VUZW1wbGF0ZURpcmVjdGl2ZSwgeyBzdGF0aWM6IGZhbHNlIH0pXG4gIGlvbmljU2VsZWN0YWJsZU1lc3NhZ2VUZW1wbGF0ZURpcmVjdGl2ZSE6IElvbmljU2VsZWN0YWJsZU1lc3NhZ2VUZW1wbGF0ZURpcmVjdGl2ZTtcblxuICBAQ29udGVudENoaWxkKElvbmljU2VsZWN0YWJsZVBsYWNlaG9sZGVyVGVtcGxhdGVEaXJlY3RpdmUsIHsgc3RhdGljOiBmYWxzZSB9KVxuICBpb25pY1NlbGVjdGFibGVQbGFjZWhvbGRlclRlbXBsYXRlRGlyZWN0aXZlITogSW9uaWNTZWxlY3RhYmxlUGxhY2Vob2xkZXJUZW1wbGF0ZURpcmVjdGl2ZTtcblxuICBAQ29udGVudENoaWxkKElvbmljU2VsZWN0YWJsZVNlYXJjaEZhaWxUZW1wbGF0ZURpcmVjdGl2ZSwgeyBzdGF0aWM6IGZhbHNlIH0pXG4gIGlvbmljU2VsZWN0YWJsZVNlYXJjaEZhaWxUZW1wbGF0ZURpcmVjdGl2ZSE6IElvbmljU2VsZWN0YWJsZVNlYXJjaEZhaWxUZW1wbGF0ZURpcmVjdGl2ZTtcblxuICBAQ29udGVudENoaWxkKElvbmljU2VsZWN0YWJsZVRpdGxlVGVtcGxhdGVEaXJlY3RpdmUsIHsgc3RhdGljOiBmYWxzZSB9KVxuICBpb25pY1NlbGVjdGFibGVUaXRsZVRlbXBsYXRlRGlyZWN0aXZlITogSW9uaWNTZWxlY3RhYmxlVGl0bGVUZW1wbGF0ZURpcmVjdGl2ZTtcblxuICBAQ29udGVudENoaWxkKElvbmljU2VsZWN0YWJsZVZhbHVlVGVtcGxhdGVEaXJlY3RpdmUsIHsgc3RhdGljOiBmYWxzZSB9KVxuICBpb25pY1NlbGVjdGFibGVWYWx1ZVRlbXBsYXRlRGlyZWN0aXZlITogSW9uaWNTZWxlY3RhYmxlVmFsdWVUZW1wbGF0ZURpcmVjdGl2ZTtcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGVsZW1lbnRSZWY6IEVsZW1lbnRSZWYsIHByb3RlY3RlZCB6OiBOZ1pvbmUsIHByaXZhdGUgdmlld0NvbnRhaW5lclJlZjogVmlld0NvbnRhaW5lclJlZikge1xuICAgIHRoaXMuZWwgPSB0aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudCBhcyBIVE1MSW9uaWNTZWxlY3RhYmxlRWxlbWVudDtcbiAgICB0aGlzLmVsLnRlbXBsYXRlUmVuZGVyID0gdGhpcy5yZW5kZXIuYmluZCh0aGlzKTtcbiAgICB0aGlzLmVsLmhhc1RlbXBsYXRlUmVuZGVyID0gdGhpcy5oYXNUZW1wbGF0ZS5iaW5kKHRoaXMpO1xuICAgIHByb3h5T3V0cHV0cyh0aGlzLCB0aGlzLmVsLCBbXG4gICAgICAnaW5maW5pdGVTY3JvbGxlZCcsXG4gICAgICAnc2VhcmNoaW5nJyxcbiAgICAgICdzZWFyY2hGYWlsZWQnLFxuICAgICAgJ3NlYXJjaFN1Y2Nlc3NlZCcsXG4gICAgICAnaXRlbUFkZGluZycsXG4gICAgICAnY2xlYXJlZCcsXG4gICAgICAnY2hhbmdlZCcsXG4gICAgICAnaXRlbXNDaGFuZ2VkJyxcbiAgICAgICdzZWxlY3RlZCcsXG4gICAgICAnb3BlbmVkJyxcbiAgICAgICdjbG9zZWQnLFxuICAgICAgJ2ZvY3VzZWQnLFxuICAgICAgJ2JsdXJyZWQnLFxuICAgIF0pO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXIoZWxlbWVudDogSFRNTEVsZW1lbnQsIHRlbXBsYXRlOiBJVGVtcGxhdGUpIHtcbiAgICB0aGlzLnoucnVuKCgpID0+IHtcbiAgICAgIGlmICh0ZW1wbGF0ZS50eXBlID09PSAnYWRkSXRlbScpIHtcbiAgICAgICAgaWYgKCFlbGVtZW50KSB7XG4gICAgICAgICAgdGhpcy5yZWZBZGRJdGVtID0gbnVsbDtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLnJlZkFkZEl0ZW0pIHtcbiAgICAgICAgICB0aGlzLmNyZWF0ZUVtYmVkZGVkVmlldyhlbGVtZW50LCB0ZW1wbGF0ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy51cGRhdGVFbWJlZGRlZFZpZXcoZWxlbWVudCwgdGVtcGxhdGUpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoIWVsZW1lbnQuaXNDb25uZWN0ZWQgJiYgZWxlbWVudC5maXJzdEVsZW1lbnRDaGlsZCkge1xuICAgICAgICAgIHRoaXMucmVmTWFwLmRlbGV0ZShlbGVtZW50KTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLnJlZk1hcC5nZXQoZWxlbWVudCkpIHtcbiAgICAgICAgICB0aGlzLmNyZWF0ZUVtYmVkZGVkVmlldyhlbGVtZW50LCB0ZW1wbGF0ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy51cGRhdGVFbWJlZGRlZFZpZXcoZWxlbWVudCwgdGVtcGxhdGUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZUVtYmVkZGVkVmlldyhlbGVtZW50OiBIVE1MRWxlbWVudCwgdGVtcGxhdGU6IElUZW1wbGF0ZSkge1xuICAgIGNvbnN0IG5vZGUgPSB0aGlzLnZpZXdDb250YWluZXJSZWYuY3JlYXRlRW1iZWRkZWRWaWV3KHRoaXMuZ2V0Q29tcG9uZW50KHRlbXBsYXRlLnR5cGUpLCB7XG4gICAgICAkaW1wbGljaXQ6IHRlbXBsYXRlLnZhbHVlLFxuICAgICAgaXNJdGVtU2VsZWN0ZWQ6IHRlbXBsYXRlLmlzSXRlbVNlbGVjdGVkLFxuICAgICAgaXNJdGVtRGlzYWJsZWQ6IHRlbXBsYXRlLmlzSXRlbURpc2FibGVkLFxuICAgICAgaXNBZGQ6IHRlbXBsYXRlLmlzQWRkLFxuICAgICAgdHlwZTogdGVtcGxhdGUudHlwZSxcbiAgICB9KTtcbiAgICBjb25zdCBjaGlsZEVsZW1lbnQgPSBnZXRFbGVtZW50KG5vZGUpO1xuICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQoY2hpbGRFbGVtZW50KTtcbiAgICBpZiAodGVtcGxhdGUudHlwZSA9PT0gJ2FkZEl0ZW0nKSB7XG4gICAgICBjaGlsZEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnaW9uLXBhZ2UnKTtcbiAgICAgIHRoaXMucmVmQWRkSXRlbSA9IG5vZGU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucmVmTWFwLnNldChlbGVtZW50LCBub2RlKTtcbiAgICB9XG4gICAgLy8gcnVuIHN5bmMgY2hhbmdlIGRldGVjdGlvbnNcbiAgICBub2RlLmRldGVjdENoYW5nZXMoKTtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlRW1iZWRkZWRWaWV3KGVsZW1lbnQ6IEhUTUxFbGVtZW50LCB0ZW1wbGF0ZTogSVRlbXBsYXRlKSB7XG4gICAgY29uc3Qgbm9kZSA9IHRlbXBsYXRlLnR5cGUgPT09ICdhZGRJdGVtJyA/IHRoaXMucmVmQWRkSXRlbSA6IHRoaXMucmVmTWFwLmdldChlbGVtZW50KSE7XG4gICAgY29uc3QgY3R4ID0gbm9kZS5jb250ZXh0O1xuICAgIGlmICh0ZW1wbGF0ZS50eXBlICE9PSBjdHgudHlwZSkge1xuICAgICAgZWxlbWVudC5yZW1vdmVDaGlsZChlbGVtZW50Lmxhc3RDaGlsZCk7XG4gICAgICB0aGlzLmNyZWF0ZUVtYmVkZGVkVmlldyhlbGVtZW50LCB0ZW1wbGF0ZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGN0eC4kaW1wbGljaXQgPSB0ZW1wbGF0ZS52YWx1ZTtcbiAgICBjdHguaXNJdGVtU2VsZWN0ZWQgPSB0ZW1wbGF0ZS5pc0l0ZW1TZWxlY3RlZDtcbiAgICBjdHguaXNJdGVtRGlzYWJsZWQgPSB0ZW1wbGF0ZS5pc0l0ZW1EaXNhYmxlZDtcbiAgICBjdHguaXNBZGQgPSB0ZW1wbGF0ZS5pc0FkZDtcbiAgICAvLyBydW4gc3luYyBjaGFuZ2UgZGV0ZWN0aW9uc1xuICAgIG5vZGUuZGV0ZWN0Q2hhbmdlcygpO1xuICB9XG5cbiAgcHJpdmF0ZSBoYXNUZW1wbGF0ZSh0eXBlOiBUZW1wbGF0ZVR5cGUpOiBib29sZWFuIHtcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgIGNhc2UgJ2FkZEl0ZW0nOlxuICAgICAgICByZXR1cm4gISF0aGlzLmlvbmljU2VsZWN0YWJsZUFkZEl0ZW1UZW1wbGF0ZURpcmVjdGl2ZTtcbiAgICAgIGNhc2UgJ2Nsb3NlQnV0dG9uJzpcbiAgICAgICAgcmV0dXJuICEhdGhpcy5pb25pY1NlbGVjdGFibGVDbG9zZUJ1dHRvblRlbXBsYXRlRGlyZWN0aXZlO1xuICAgICAgY2FzZSAnZm9vdGVyJzpcbiAgICAgICAgcmV0dXJuICEhdGhpcy5pb25pY1NlbGVjdGFibGVGb290ZXJUZW1wbGF0ZURpcmVjdGl2ZTtcbiAgICAgIGNhc2UgJ2dyb3VwRW5kJzpcbiAgICAgICAgcmV0dXJuICEhdGhpcy5pb25pY1NlbGVjdGFibGVHcm91cEVuZFRlbXBsYXRlRGlyZWN0aXZlO1xuICAgICAgY2FzZSAnZ3JvdXAnOlxuICAgICAgICByZXR1cm4gISF0aGlzLmlvbmljU2VsZWN0YWJsZUdyb3VwVGVtcGxhdGVEaXJlY3RpdmU7XG4gICAgICBjYXNlICdoZWFkZXInOlxuICAgICAgICByZXR1cm4gISF0aGlzLmlvbmljU2VsZWN0YWJsZUhlYWRlclRlbXBsYXRlRGlyZWN0aXZlO1xuICAgICAgY2FzZSAnaWNvbic6XG4gICAgICAgIHJldHVybiAhIXRoaXMuaW9uaWNTZWxlY3RhYmxlSWNvblRlbXBsYXRlRGlyZWN0aXZlO1xuICAgICAgY2FzZSAnaXRlbSc6XG4gICAgICAgIHJldHVybiAhIXRoaXMuaW9uaWNTZWxlY3RhYmxlSXRlbVRlbXBsYXRlRGlyZWN0aXZlO1xuICAgICAgY2FzZSAnaXRlbUVuZCc6XG4gICAgICAgIHJldHVybiAhIXRoaXMuaW9uaWNTZWxlY3RhYmxlSXRlbUVuZFRlbXBsYXRlRGlyZWN0aXZlO1xuICAgICAgY2FzZSAnaXRlbUljb24nOlxuICAgICAgICByZXR1cm4gISF0aGlzLmlvbmljU2VsZWN0YWJsZUl0ZW1JY29uVGVtcGxhdGVEaXJlY3RpdmU7XG4gICAgICBjYXNlICdtZXNzYWdlJzpcbiAgICAgICAgcmV0dXJuICEhdGhpcy5pb25pY1NlbGVjdGFibGVNZXNzYWdlVGVtcGxhdGVEaXJlY3RpdmU7XG4gICAgICBjYXNlICdwbGFjZWhvbGRlcic6XG4gICAgICAgIHJldHVybiAhIXRoaXMuaW9uaWNTZWxlY3RhYmxlUGxhY2Vob2xkZXJUZW1wbGF0ZURpcmVjdGl2ZTtcbiAgICAgIGNhc2UgJ3NlYXJjaEZhaWwnOlxuICAgICAgICByZXR1cm4gISF0aGlzLmlvbmljU2VsZWN0YWJsZVNlYXJjaEZhaWxUZW1wbGF0ZURpcmVjdGl2ZTtcbiAgICAgIGNhc2UgJ3RpdGxlJzpcbiAgICAgICAgcmV0dXJuICEhdGhpcy5pb25pY1NlbGVjdGFibGVUaXRsZVRlbXBsYXRlRGlyZWN0aXZlO1xuICAgICAgY2FzZSAndmFsdWUnOlxuICAgICAgICByZXR1cm4gISF0aGlzLmlvbmljU2VsZWN0YWJsZVZhbHVlVGVtcGxhdGVEaXJlY3RpdmU7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBnZXRDb21wb25lbnQodHlwZTogVGVtcGxhdGVUeXBlKTogVGVtcGxhdGVSZWY8VGVtcGxhdGVDb250ZXh0PiB7XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICBjYXNlICdhZGRJdGVtJzpcbiAgICAgICAgcmV0dXJuIHRoaXMuaW9uaWNTZWxlY3RhYmxlQWRkSXRlbVRlbXBsYXRlRGlyZWN0aXZlLnRlbXBsYXRlUmVmO1xuICAgICAgY2FzZSAnY2xvc2VCdXR0b24nOlxuICAgICAgICByZXR1cm4gdGhpcy5pb25pY1NlbGVjdGFibGVDbG9zZUJ1dHRvblRlbXBsYXRlRGlyZWN0aXZlLnRlbXBsYXRlUmVmO1xuICAgICAgY2FzZSAnZm9vdGVyJzpcbiAgICAgICAgcmV0dXJuIHRoaXMuaW9uaWNTZWxlY3RhYmxlRm9vdGVyVGVtcGxhdGVEaXJlY3RpdmUudGVtcGxhdGVSZWY7XG4gICAgICBjYXNlICdncm91cEVuZCc6XG4gICAgICAgIHJldHVybiB0aGlzLmlvbmljU2VsZWN0YWJsZUdyb3VwRW5kVGVtcGxhdGVEaXJlY3RpdmUudGVtcGxhdGVSZWY7XG4gICAgICBjYXNlICdncm91cCc6XG4gICAgICAgIHJldHVybiB0aGlzLmlvbmljU2VsZWN0YWJsZUdyb3VwVGVtcGxhdGVEaXJlY3RpdmUudGVtcGxhdGVSZWY7XG4gICAgICBjYXNlICdoZWFkZXInOlxuICAgICAgICByZXR1cm4gdGhpcy5pb25pY1NlbGVjdGFibGVIZWFkZXJUZW1wbGF0ZURpcmVjdGl2ZS50ZW1wbGF0ZVJlZjtcbiAgICAgIGNhc2UgJ2ljb24nOlxuICAgICAgICByZXR1cm4gdGhpcy5pb25pY1NlbGVjdGFibGVJY29uVGVtcGxhdGVEaXJlY3RpdmUudGVtcGxhdGVSZWY7XG4gICAgICBjYXNlICdpdGVtJzpcbiAgICAgICAgcmV0dXJuIHRoaXMuaW9uaWNTZWxlY3RhYmxlSXRlbVRlbXBsYXRlRGlyZWN0aXZlLnRlbXBsYXRlUmVmO1xuICAgICAgY2FzZSAnaXRlbUVuZCc6XG4gICAgICAgIHJldHVybiB0aGlzLmlvbmljU2VsZWN0YWJsZUl0ZW1FbmRUZW1wbGF0ZURpcmVjdGl2ZS50ZW1wbGF0ZVJlZjtcbiAgICAgIGNhc2UgJ2l0ZW1JY29uJzpcbiAgICAgICAgcmV0dXJuIHRoaXMuaW9uaWNTZWxlY3RhYmxlSXRlbUljb25UZW1wbGF0ZURpcmVjdGl2ZS50ZW1wbGF0ZVJlZjtcbiAgICAgIGNhc2UgJ21lc3NhZ2UnOlxuICAgICAgICByZXR1cm4gdGhpcy5pb25pY1NlbGVjdGFibGVNZXNzYWdlVGVtcGxhdGVEaXJlY3RpdmUudGVtcGxhdGVSZWY7XG4gICAgICBjYXNlICdwbGFjZWhvbGRlcic6XG4gICAgICAgIHJldHVybiB0aGlzLmlvbmljU2VsZWN0YWJsZVBsYWNlaG9sZGVyVGVtcGxhdGVEaXJlY3RpdmUudGVtcGxhdGVSZWY7XG4gICAgICBjYXNlICdzZWFyY2hGYWlsJzpcbiAgICAgICAgcmV0dXJuIHRoaXMuaW9uaWNTZWxlY3RhYmxlU2VhcmNoRmFpbFRlbXBsYXRlRGlyZWN0aXZlLnRlbXBsYXRlUmVmO1xuICAgICAgY2FzZSAndGl0bGUnOlxuICAgICAgICByZXR1cm4gdGhpcy5pb25pY1NlbGVjdGFibGVUaXRsZVRlbXBsYXRlRGlyZWN0aXZlLnRlbXBsYXRlUmVmO1xuICAgICAgY2FzZSAndmFsdWUnOlxuICAgICAgICByZXR1cm4gdGhpcy5pb25pY1NlbGVjdGFibGVWYWx1ZVRlbXBsYXRlRGlyZWN0aXZlLnRlbXBsYXRlUmVmO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGB0ZW1wbGF0ZSBmb3IgJHt0eXBlfSB3YXMgbm90IHByb3ZpZGVkYCk7XG4gICAgfVxuICB9XG59XG5cbmNvbnN0IGdldEVsZW1lbnQgPSAodmlldzogRW1iZWRkZWRWaWV3UmVmPFRlbXBsYXRlQ29udGV4dD4pOiBIVE1MRWxlbWVudCA9PiB7XG4gIGNvbnN0IHJvb3ROb2RlcyA9IHZpZXcucm9vdE5vZGVzO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHJvb3ROb2Rlcy5sZW5ndGg7IGkrKykge1xuICAgIGlmIChyb290Tm9kZXNbaV0ubm9kZVR5cGUgPT09IDEpIHtcbiAgICAgIHJldHVybiByb290Tm9kZXNbaV07XG4gICAgfVxuICB9XG4gIHRocm93IG5ldyBFcnJvcignZWxlbWVudCB3YXMgbm90IGNyZWF0ZWQnKTtcbn07XG4iXX0=